<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cerata: src/cerata/graph.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cerata.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cerata
   </div>
   <div id="projectbrief">A library to generate structural hardware designs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('graph_8cc_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">graph.cc</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2018 Delft University of Technology</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;cerata/graph.h&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;cerata/utils.h&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;cerata/node.h&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;cerata/logging.h&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;cerata/object.h&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;cerata/pool.h&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacecerata.html">cerata</a> {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> AddParamSources(Graph *graph, <span class="keyword">const</span> Object &amp;obj) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (obj.IsNode()) {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keyword">auto</span> &amp;node = dynamic_cast&lt;const Node &amp;&gt;(obj);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">if</span> (node.IsParameter()) {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      <span class="keyword">auto</span> &amp;par = node.AsParameter();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      <span class="comment">// If the parameter node has edges</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keywordflow">if</span> (par.GetValue()) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="comment">// Obtain shared ownership of the value and add it to the graph</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">auto</span> val = par.GetValue().value()-&gt;shared_from_this();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        graph-&gt;Add(val);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> AddObjectParams(Graph *comp, <span class="keyword">const</span> Object &amp;obj) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">if</span> (obj.IsNode()) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">auto</span> &amp;node = dynamic_cast&lt;const Node &amp;&gt;(obj);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">auto</span> params = node.type()-&gt;GetParameters();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : params) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="comment">// Take ownership of the node and add it to the component.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      comp-&gt;Add(p-&gt;shared_from_this());</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      AddParamSources(comp, obj);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj.IsArray()) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">auto</span> &amp;array = dynamic_cast&lt;const NodeArray &amp;&gt;(obj);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">auto</span> array_size = array.size()-&gt;shared_from_this();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    comp-&gt;Add(array_size);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    AddParamSources(comp, *array_size);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">   61</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">Graph::Add</a>(<span class="keyword">const</span> std::shared_ptr&lt;Object&gt; &amp;obj) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// Check for duplicates in name / ownership</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;o : <a class="code" href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">objects_</a>) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">if</span> (o-&gt;name() == obj-&gt;name()) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <span class="keywordflow">if</span> (o.get() == obj.get()) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">// Graph already owns object. We can skip adding.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        CERATA_LOG(FATAL, <span class="stringliteral">&quot;Graph &quot;</span> + <a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>() + <span class="stringliteral">&quot; already contains an object with name &quot;</span> + obj-&gt;name());</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">objects_</a>.push_back(obj);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  obj-&gt;SetParent(<span class="keyword">this</span>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  AddObjectParams(<span class="keyword">this</span>, *obj);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a0543d4b633eb162c6e066d8260f11432">   79</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">Graph::Add</a>(<span class="keyword">const</span> std::initializer_list&lt;std::shared_ptr&lt;Object&gt;&gt; &amp;objs) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;obj : objs) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">Add</a>(obj);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a2ec4594406c16d124dc714aaa418289f">   86</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_graph.html#a2ec4594406c16d124dc714aaa418289f">Graph::Remove</a>(<a class="code" href="classcerata_1_1_object.html">Object</a> *obj) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> o = <a class="code" href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">objects_</a>.begin(); o &lt; <a class="code" href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">objects_</a>.end(); o++) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (o-&gt;get() == obj) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">objects_</a>.erase(o);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classcerata_1_1_component.html#acf59ac7222ba254e269ec93dc4180abc">   95</a></span>&#160;std::shared_ptr&lt;Component&gt; <a class="code" href="classcerata_1_1_component.html#acf59ac7222ba254e269ec93dc4180abc">Component::Make</a>(std::string name,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                           <span class="keyword">const</span> std::deque&lt;std::shared_ptr&lt;Object&gt;&gt; &amp;objects,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                           <a class="code" href="classcerata_1_1_component_pool.html">ComponentPool</a> *component_pool) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// Create the new component.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">auto</span> *ptr = <span class="keyword">new</span> <a class="code" href="classcerata_1_1_component.html#afce635b911d12f6368724c5b649ffcbe">Component</a>(std::move(<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>));</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">auto</span> ret = std::shared_ptr&lt;Component&gt;(ptr);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// Add the component to the pool.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  component_pool-&gt;<a class="code" href="classcerata_1_1_pool.html#a9e035943aaaaa8ba2ffd9d733d7187f7">Add</a>(ret);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Add the objects shown in the queue.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<span class="keywordtype">object</span> : <a class="code" href="classcerata_1_1_graph.html#a5da075f242493a3d9c9d23fcb67326d5">objects</a>) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Add the object to the graph.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    ret-&gt;Add(<span class="keywordtype">object</span>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classcerata_1_1_component.html#a5d1fe33f0e3ef45351b92f156eed20f9">  113</a></span>&#160;<a class="code" href="classcerata_1_1_component.html">Component</a> &amp;<a class="code" href="classcerata_1_1_component.html#a5d1fe33f0e3ef45351b92f156eed20f9">Component::AddChild</a>(std::unique_ptr&lt;Instance&gt; child) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// Add this graph to the child&#39;s parent graphs</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  child-&gt;SetParent(<span class="keyword">this</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// Add the child graph</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classcerata_1_1_component.html#a217e920c7666f729ffade7f7d3ed97eb">children_</a>.push_back(std::move(child));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classcerata_1_1_component.html#a72fff25081e9586b759ad464d96ba204">  121</a></span>&#160;<a class="code" href="classcerata_1_1_instance.html">Instance</a> *<a class="code" href="classcerata_1_1_component.html#a72fff25081e9586b759ad464d96ba204">Component::AddInstanceOf</a>(<a class="code" href="classcerata_1_1_component.html">Component</a> *comp, <span class="keyword">const</span> std::string &amp;name) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">auto</span> inst = <a class="code" href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">Instance::Make</a>(comp, <a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">auto</span> raw_ptr = inst.get();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="classcerata_1_1_component.html#a5d1fe33f0e3ef45351b92f156eed20f9">AddChild</a>(std::move(inst));</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> raw_ptr;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classcerata_1_1_component.html#a4915e1f293397a4142f65ab48f61dfe3">  128</a></span>&#160;std::deque&lt;const Component *&gt; <a class="code" href="classcerata_1_1_component.html#a4915e1f293397a4142f65ab48f61dfe3">Component::GetAllUniqueComponents</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  std::deque&lt;const Component *&gt; ret;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;child : <a class="code" href="classcerata_1_1_component.html#a217e920c7666f729ffade7f7d3ed97eb">children_</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">const</span> <a class="code" href="classcerata_1_1_component.html">Component</a> *comp = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (child-&gt;IsComponent()) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// Graph itself is the component to potentially insert</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keyword">auto</span> child_as_comp = dynamic_cast&lt;Component *&gt;(child.get());</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      comp = child_as_comp;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child-&gt;IsInstance()) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keyword">auto</span> child_as_inst = dynamic_cast&lt;Instance *&gt;(child.get());</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">// Graph is an instance, its component definition should be inserted.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      comp = child_as_inst-&gt;component();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (comp != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacecerata.html#a1460864427a8c61e7780b31edb5229c8">Contains</a>(ret, comp)) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// If so, push it onto the deque</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        ret.push_back(comp);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#ab65ef6221bdb98eb81af09141cd8fc9c">  151</a></span>&#160;std::optional&lt;NodeArray *&gt; <a class="code" href="classcerata_1_1_graph.html#ab65ef6221bdb98eb81af09141cd8fc9c">Graph::GetArray</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> node_id, <span class="keyword">const</span> std::string &amp;array_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;a : GetAll&lt;NodeArray&gt;()) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> ((a-&gt;name() == array_name) &amp;&amp; (a-&gt;node_id() == node_id)) <span class="keywordflow">return</span> a;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  CERATA_LOG(DEBUG, <span class="stringliteral">&quot;NodeArray &quot;</span> + array_name + <span class="stringliteral">&quot; does not exist on Graph &quot;</span> + this-&gt;<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>());</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">  159</a></span>&#160;std::optional&lt;Node *&gt; <a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">Graph::GetNode</a>(<span class="keyword">const</span> std::string &amp;node_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (n-&gt;name() == node_name) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a40399e00a0414b7a401c412ab07d25d7">  168</a></span>&#160;<a class="code" href="classcerata_1_1_node.html">Node</a> *<a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">Graph::GetNode</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> node_id, <span class="keyword">const</span> std::string &amp;node_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (n-&gt;name() == node_name) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> (n-&gt;Is(node_id)) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  CERATA_LOG(FATAL, <span class="stringliteral">&quot;Node &quot;</span> + node_name + <span class="stringliteral">&quot; does not exist on Graph &quot;</span> + this-&gt;<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>());</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a7314ea5856a2faec989994d53a7e08cf">  179</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classcerata_1_1_graph.html#a7314ea5856a2faec989994d53a7e08cf">Graph::CountNodes</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">size_t</span> count = 0;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (n-&gt;Is(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      count++;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#ad4a2a2e183b1797cdbf635c44268e510">  189</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classcerata_1_1_graph.html#ad4a2a2e183b1797cdbf635c44268e510">Graph::CountArrays</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordtype">size_t</span> count = 0;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;NodeArray&gt;()) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (n-&gt;node_id() == <a class="code" href="classcerata_1_1_graph.html#aa856f818381a62d43e9c10be0a33b033">id</a>) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      count++;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a703fd94a40053737d4a07e11b3676059">  199</a></span>&#160;std::deque&lt;Node *&gt; <a class="code" href="classcerata_1_1_graph.html#a703fd94a40053737d4a07e11b3676059">Graph::GetNodesOfType</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  std::deque&lt;Node *&gt; result;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (n-&gt;Is(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      result.push_back(n);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a4232ce93fcff7304919f50dc123f5d06">  209</a></span>&#160;std::deque&lt;NodeArray *&gt; <a class="code" href="classcerata_1_1_graph.html#a4232ce93fcff7304919f50dc123f5d06">Graph::GetArraysOfType</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">Node::NodeID</a> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  std::deque&lt;NodeArray *&gt; result;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keyword">auto</span> arrays = GetAll&lt;NodeArray&gt;();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;a : arrays) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (a-&gt;node_id() == <a class="code" href="classcerata_1_1_graph.html#aa856f818381a62d43e9c10be0a33b033">id</a>) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      result.push_back(a);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">  220</a></span>&#160;<a class="code" href="structcerata_1_1_port.html">Port</a> *<a class="code" href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">Graph::port</a>(<span class="keyword">const</span> std::string &amp;port_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">return</span> dynamic_cast&lt;Port *&gt;(<a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">GetNode</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0a463c00141b4c3a7f76acd3540052f8f5">Node::NodeID::PORT</a>, port_name));</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a815d4043ef9878fa6b7f8b52638ac3ab">  224</a></span>&#160;<a class="code" href="classcerata_1_1_signal.html">Signal</a> *<a class="code" href="classcerata_1_1_graph.html#a815d4043ef9878fa6b7f8b52638ac3ab">Graph::sig</a>(<span class="keyword">const</span> std::string &amp;signal_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> dynamic_cast&lt;Signal *&gt;(<a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">GetNode</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0ac023ee28e6cb71d64feec71f0cbac067">Node::NodeID::SIGNAL</a>, signal_name));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#ad7ed55b8478d2bb7b902015fe578f88e">  228</a></span>&#160;<a class="code" href="classcerata_1_1_parameter.html">Parameter</a> *<a class="code" href="classcerata_1_1_graph.html#ad7ed55b8478d2bb7b902015fe578f88e">Graph::par</a>(<span class="keyword">const</span> std::string &amp;signal_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">return</span> dynamic_cast&lt;Parameter *&gt;(<a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">GetNode</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0abf1d4bbf6ed8626603df4a7cac94ee8c">Node::NodeID::PARAMETER</a>, signal_name));</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#ae9b4d0716bce30bd5d6f3c30aa85a9cb">  232</a></span>&#160;<a class="code" href="classcerata_1_1_port_array.html">PortArray</a> *<a class="code" href="classcerata_1_1_graph.html#ae9b4d0716bce30bd5d6f3c30aa85a9cb">Graph::porta</a>(<span class="keyword">const</span> std::string &amp;port_name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keyword">auto</span> opa = <a class="code" href="classcerata_1_1_graph.html#ab65ef6221bdb98eb81af09141cd8fc9c">GetArray</a>(<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0a463c00141b4c3a7f76acd3540052f8f5">Node::NodeID::PORT</a>, port_name);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (opa) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> dynamic_cast&lt;PortArray *&gt;(*opa);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#a393ed097de2eb3a50c6b73369f0bc791">  241</a></span>&#160;std::deque&lt;Node *&gt; <a class="code" href="classcerata_1_1_graph.html#a393ed097de2eb3a50c6b73369f0bc791">Graph::GetImplicitNodes</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  std::deque&lt;Node *&gt; result;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;i : n-&gt;sources()) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">if</span> (i-&gt;src()) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (!i-&gt;src()-&gt;parent()) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          result.push_back(i-&gt;src());</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keyword">auto</span> last = std::unique(result.begin(), result.end());</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  result.erase(last, result.end());</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#ae0f50c075f64dd349b9e01bc73052a1d">  257</a></span>&#160;std::deque&lt;Node *&gt; <a class="code" href="classcerata_1_1_graph.html#ae0f50c075f64dd349b9e01bc73052a1d">Graph::GetNodesOfTypes</a>(std::initializer_list&lt;Node::NodeID&gt; ids)<span class="keyword"> const </span>{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  std::deque&lt;Node *&gt; result;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;n : GetAll&lt;Node&gt;()) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<span class="keywordtype">id</span> : ids) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">if</span> (n-&gt;node_id() == <a class="code" href="classcerata_1_1_graph.html#aa856f818381a62d43e9c10be0a33b033">id</a>) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        result.push_back(n);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classcerata_1_1_graph.html#acb9e2d5149c5df31fb41a0dd6c9db1d6">  270</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_graph.html#acb9e2d5149c5df31fb41a0dd6c9db1d6">Graph::SetMeta</a>(<span class="keyword">const</span> std::string &amp;key, std::string value) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="classcerata_1_1_graph.html#a7b1467cb47abeb9ab239326a1f879f09">meta_</a>[key] = std::move(value);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">  275</a></span>&#160;std::unique_ptr&lt;Instance&gt; <a class="code" href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">Instance::Make</a>(<a class="code" href="classcerata_1_1_component.html">Component</a> *component, <span class="keyword">const</span> std::string &amp;name) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keyword">auto</span> n = <a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>.empty()) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    n = <a class="code" href="classcerata_1_1_instance.html#ab02babf1fa7c135622efbf1a8b8398cd">component</a>-&gt;<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>() + <span class="stringliteral">&quot;_inst&quot;</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keyword">auto</span> inst = <span class="keyword">new</span> <a class="code" href="classcerata_1_1_instance.html#a0ffae357a3fdfa5373f73911b42797f0">Instance</a>(<a class="code" href="classcerata_1_1_instance.html#ab02babf1fa7c135622efbf1a8b8398cd">component</a>, n);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">return</span> std::unique_ptr&lt;Instance&gt;(inst);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classcerata_1_1_instance.html#a82e3dde1b185f02f0907c475f9505301">  284</a></span>&#160;std::unique_ptr&lt;Instance&gt; <a class="code" href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">Instance::Make</a>(<a class="code" href="classcerata_1_1_component.html">Component</a> *component) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">Make</a>(<a class="code" href="classcerata_1_1_instance.html#ab02babf1fa7c135622efbf1a8b8398cd">component</a>, <a class="code" href="classcerata_1_1_instance.html#ab02babf1fa7c135622efbf1a8b8398cd">component</a>-&gt;<a class="code" href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">name</a>() + <span class="stringliteral">&quot;_inst&quot;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classcerata_1_1_instance.html#a0ffae357a3fdfa5373f73911b42797f0">  288</a></span>&#160;<a class="code" href="classcerata_1_1_instance.html#a0ffae357a3fdfa5373f73911b42797f0">Instance::Instance</a>(<a class="code" href="classcerata_1_1_component.html">Component</a> *comp, std::string name)</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    : <a class="code" href="classcerata_1_1_graph.html">Graph</a>(std::move(name), INSTANCE), component_(comp) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// Create a map that maps an &quot;old&quot; node to a &quot;new&quot; node.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  std::map&lt;Object *, Object *&gt; copies;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Make copies of ports</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">port</a> : <a class="code" href="classcerata_1_1_instance.html#a24e8347595668f3256946bb9332f55e8">component_</a>-&gt;<a class="code" href="classcerata_1_1_graph.html#a66839413fa4730d2104bdfaaaaa0f90a">GetAll</a>&lt;<a class="code" href="structcerata_1_1_port.html">Port</a>&gt;()) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keyword">auto</span> instance_port = <a class="code" href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">port</a>-&gt;<a class="code" href="structcerata_1_1_port.html#a23d3db8dfd20f6cdae00c1fde0dcddf3">Copy</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">Add</a>(instance_port);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    copies[<a class="code" href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">port</a>] = instance_port.get();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// Make copies of port arrays</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;array_port : <a class="code" href="classcerata_1_1_instance.html#a24e8347595668f3256946bb9332f55e8">component_</a>-&gt;<a class="code" href="classcerata_1_1_graph.html#a66839413fa4730d2104bdfaaaaa0f90a">GetAll</a>&lt;<a class="code" href="classcerata_1_1_port_array.html">PortArray</a>&gt;()) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">auto</span> original_size_node = array_port-&gt;size();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// Make a copy of the port.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">auto</span> instance_port_array = std::dynamic_pointer_cast&lt;PortArray&gt;(array_port-&gt;Copy());</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    copies[array_port] = instance_port_array.get();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">Add</a>(instance_port_array);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// This has created a copy of the size node as well, but it might be that the size node was already copied before.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// In this case, we want the size node to be the same node as copied before.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// Figure out whether the size node was already copied.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classcerata_1_1_object.html">Object</a> *copied_size_node = instance_port_array-&gt;size();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (copies.count(original_size_node) &gt; 0) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// It was already copied, obtain a pointer to it.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      copied_size_node = copies[original_size_node];</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">// Obtain ownership of the copied size node and supply it as size node to the port array.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keyword">auto</span> inst_size_node = dynamic_cast&lt;Node *&gt;(copied_size_node)-&gt;shared_from_this();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      instance_port_array-&gt;SetSize(inst_size_node);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      copies[original_size_node] = copied_size_node;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Make copies of parameters and literals</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">auto</span> pars_lits = <a class="code" href="classcerata_1_1_instance.html#a24e8347595668f3256946bb9332f55e8">component_</a>-&gt;<a class="code" href="classcerata_1_1_graph.html#ae0f50c075f64dd349b9e01bc73052a1d">GetNodesOfTypes</a>({<a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0abf1d4bbf6ed8626603df4a7cac94ee8c">Node::NodeID::PARAMETER</a>, <a class="code" href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0aa0000d7769148184776f1d17656921b0">Node::NodeID::LITERAL</a>});</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;node : pars_lits) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Copies might have already been made by adding ports with node parametrized types to the graph.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// We therefore just check if those nodes are already present by name.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">auto</span> potential_node = <a class="code" href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">GetNode</a>(node-&gt;name());</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span> (!potential_node) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (copies.count(node) == 0) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keyword">auto</span> inst_node = node-&gt;Copy();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">Add</a>(inst_node);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        copies[node] = inst_node.get();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">  340</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">Instance::Add</a>(<span class="keyword">const</span> std::shared_ptr&lt;Object&gt; &amp;<span class="keywordtype">object</span>) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (object-&gt;IsNode()) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">auto</span> node = std::dynamic_pointer_cast&lt;Node&gt;(<span class="keywordtype">object</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (node-&gt;IsSignal()) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      CERATA_LOG(FATAL, <span class="stringliteral">&quot;Instance Graph cannot own Signal nodes. &quot;</span> + node-&gt;ToString());</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">Graph::Add</a>(<span class="keywordtype">object</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordtype">object</span>-&gt;SetParent(<span class="keyword">this</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="classcerata_1_1_instance.html#a379e554667ecd54faf7f3c398c054628">  352</a></span>&#160;<a class="code" href="classcerata_1_1_graph.html">Graph</a> &amp;<a class="code" href="classcerata_1_1_instance.html#a379e554667ecd54faf7f3c398c054628">Instance::SetParent</a>(<a class="code" href="classcerata_1_1_graph.html">Graph</a> *parent) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classcerata_1_1_instance.html#a1ca47db3cb53770e29b669b591ef2ee5">parent_</a> = <a class="code" href="classcerata_1_1_instance.html#a8fac9a50299f80706479386dd5112bee">parent</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}  <span class="comment">// namespace cerata</span></div><div class="ttc" id="classcerata_1_1_node_html"><div class="ttname"><a href="classcerata_1_1_node.html">cerata::Node</a></div><div class="ttdoc">A node.</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00041">node.h:41</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ae0f50c075f64dd349b9e01bc73052a1d"><div class="ttname"><a href="classcerata_1_1_graph.html#ae0f50c075f64dd349b9e01bc73052a1d">cerata::Graph::GetNodesOfTypes</a></div><div class="ttdeci">std::deque&lt; Node * &gt; GetNodesOfTypes(std::initializer_list&lt; Node::NodeID &gt; ids) const</div><div class="ttdoc">Obtain all nodes which ids are in a list of Node::IDs.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00257">graph.cc:257</a></div></div>
<div class="ttc" id="structcerata_1_1_port_html"><div class="ttname"><a href="structcerata_1_1_port.html">cerata::Port</a></div><div class="ttdoc">A port is a terminator node on a graph.</div><div class="ttdef"><b>Definition:</b> <a href="port_8h_source.html#l00057">port.h:57</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_acf59ac7222ba254e269ec93dc4180abc"><div class="ttname"><a href="classcerata_1_1_component.html#acf59ac7222ba254e269ec93dc4180abc">cerata::Component::Make</a></div><div class="ttdeci">static std::shared_ptr&lt; Component &gt; Make(std::string name, const std::deque&lt; std::shared_ptr&lt; Object &gt;&gt; &amp;nodes, ComponentPool *component_pool=default_component_pool())</div><div class="ttdoc">Construct a Component with initial nodes.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00095">graph.cc:95</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a8fac9a50299f80706479386dd5112bee"><div class="ttname"><a href="classcerata_1_1_instance.html#a8fac9a50299f80706479386dd5112bee">cerata::Instance::parent</a></div><div class="ttdeci">Graph * parent() const</div><div class="ttdoc">Return the parent graph.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00190">graph.h:190</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a3ea84eb35eb4dbfd6f456cd713ec738a"><div class="ttname"><a href="classcerata_1_1_instance.html#a3ea84eb35eb4dbfd6f456cd713ec738a">cerata::Instance::Add</a></div><div class="ttdeci">Graph &amp; Add(const std::shared_ptr&lt; Object &gt; &amp;obj) override</div><div class="ttdoc">Add a node to the component, throwing an exception if the node is a signal.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00340">graph.cc:340</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a24e8347595668f3256946bb9332f55e8"><div class="ttname"><a href="classcerata_1_1_instance.html#a24e8347595668f3256946bb9332f55e8">cerata::Instance::component_</a></div><div class="ttdeci">Component * component_</div><div class="ttdoc">The component that this instance instantiates.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00199">graph.h:199</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ab65ef6221bdb98eb81af09141cd8fc9c"><div class="ttname"><a href="classcerata_1_1_graph.html#ab65ef6221bdb98eb81af09141cd8fc9c">cerata::Graph::GetArray</a></div><div class="ttdeci">std::optional&lt; NodeArray * &gt; GetArray(Node::NodeID node_id, const std::string &amp;array_name) const</div><div class="ttdoc">Get a NodeArray object of a specific type with a specific name.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00151">graph.cc:151</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_aa856f818381a62d43e9c10be0a33b033"><div class="ttname"><a href="classcerata_1_1_graph.html#aa856f818381a62d43e9c10be0a33b033">cerata::Graph::id</a></div><div class="ttdeci">ID id() const</div><div class="ttdoc">Return the graph type ID.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00049">graph.h:49</a></div></div>
<div class="ttc" id="classcerata_1_1_node_html_a648f249ae6714826366a329ac33730c0ac023ee28e6cb71d64feec71f0cbac067"><div class="ttname"><a href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0ac023ee28e6cb71d64feec71f0cbac067">cerata::Node::NodeID::SIGNAL</a></div><div class="ttdoc">Single-input AND multi-output node.</div></div>
<div class="ttc" id="classcerata_1_1_port_array_html"><div class="ttname"><a href="classcerata_1_1_port_array.html">cerata::PortArray</a></div><div class="ttdoc">An array of port nodes.</div><div class="ttdef"><b>Definition:</b> <a href="node__array_8h_source.html#l00113">node_array.h:113</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_af98e1b976b4a66745628d717be1a9715"><div class="ttname"><a href="classcerata_1_1_instance.html#af98e1b976b4a66745628d717be1a9715">cerata::Instance::Make</a></div><div class="ttdeci">static std::unique_ptr&lt; Instance &gt; Make(Component *component, const std::string &amp;name)</div><div class="ttdoc">Construct a shared pointer to a Component.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00275">graph.cc:275</a></div></div>
<div class="ttc" id="classcerata_1_1_signal_html"><div class="ttname"><a href="classcerata_1_1_signal.html">cerata::Signal</a></div><div class="ttdoc">A Signal Node.</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00191">node.h:191</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a0ffae357a3fdfa5373f73911b42797f0"><div class="ttname"><a href="classcerata_1_1_instance.html#a0ffae357a3fdfa5373f73911b42797f0">cerata::Instance::Instance</a></div><div class="ttdeci">Instance(Component *comp, std::string name)</div><div class="ttdoc">Construct an Instance of a Component, copying over all its ports and parameters.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00288">graph.cc:288</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_acb9e2d5149c5df31fb41a0dd6c9db1d6"><div class="ttname"><a href="classcerata_1_1_graph.html#acb9e2d5149c5df31fb41a0dd6c9db1d6">cerata::Graph::SetMeta</a></div><div class="ttdeci">Graph &amp; SetMeta(const std::string &amp;key, std::string value)</div><div class="ttdoc">Set metadata.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00270">graph.cc:270</a></div></div>
<div class="ttc" id="classcerata_1_1_parameter_html"><div class="ttname"><a href="classcerata_1_1_parameter.html">cerata::Parameter</a></div><div class="ttdoc">A Parameter node.</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00211">node.h:211</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a2ec4594406c16d124dc714aaa418289f"><div class="ttname"><a href="classcerata_1_1_graph.html#a2ec4594406c16d124dc714aaa418289f">cerata::Graph::Remove</a></div><div class="ttdeci">virtual Graph &amp; Remove(Object *obj)</div><div class="ttdoc">Remove an object from the component.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00086">graph.cc:86</a></div></div>
<div class="ttc" id="classcerata_1_1_object_html"><div class="ttname"><a href="classcerata_1_1_object.html">cerata::Object</a></div><div class="ttdoc">A Cerata Object on a graph.</div><div class="ttdef"><b>Definition:</b> <a href="object_8h_source.html#l00033">object.h:33</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a06983a847dd329e593ae50539baf482f"><div class="ttname"><a href="classcerata_1_1_graph.html#a06983a847dd329e593ae50539baf482f">cerata::Graph::port</a></div><div class="ttdeci">Port * port(const std::string &amp;port_name) const</div><div class="ttdoc">Shorthand to Get(Node::PORT, ..)</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00220">graph.cc:220</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_a5d1fe33f0e3ef45351b92f156eed20f9"><div class="ttname"><a href="classcerata_1_1_component.html#a5d1fe33f0e3ef45351b92f156eed20f9">cerata::Component::AddChild</a></div><div class="ttdeci">Component &amp; AddChild(std::unique_ptr&lt; Instance &gt; child)</div><div class="ttdoc">Add and take ownership of an Instance graph.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00113">graph.cc:113</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a379e554667ecd54faf7f3c398c054628"><div class="ttname"><a href="classcerata_1_1_instance.html#a379e554667ecd54faf7f3c398c054628">cerata::Instance::SetParent</a></div><div class="ttdeci">Graph &amp; SetParent(Graph *parent)</div><div class="ttdoc">Set the parent.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00352">graph.cc:352</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ad4a2a2e183b1797cdbf635c44268e510"><div class="ttname"><a href="classcerata_1_1_graph.html#ad4a2a2e183b1797cdbf635c44268e510">cerata::Graph::CountArrays</a></div><div class="ttdeci">size_t CountArrays(Node::NodeID id) const</div><div class="ttdoc">Count nodes of a specific array type.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00189">graph.cc:189</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html"><div class="ttname"><a href="classcerata_1_1_component.html">cerata::Component</a></div><div class="ttdoc">A Component graph.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00128">graph.h:128</a></div></div>
<div class="ttc" id="structcerata_1_1_named_html_afa6d1c59e3c08d7a4761a8227d91d2e3"><div class="ttname"><a href="structcerata_1_1_named.html#afa6d1c59e3c08d7a4761a8227d91d2e3">cerata::Named::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdoc">Return the name of the object.</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00037">utils.h:37</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a393ed097de2eb3a50c6b73369f0bc791"><div class="ttname"><a href="classcerata_1_1_graph.html#a393ed097de2eb3a50c6b73369f0bc791">cerata::Graph::GetImplicitNodes</a></div><div class="ttdeci">std::deque&lt; Node * &gt; GetImplicitNodes() const</div><div class="ttdoc">Return all graph nodes that do not explicitly belong to the graph.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00241">graph.cc:241</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a6b219e526084e422f19a563b15352bb5"><div class="ttname"><a href="classcerata_1_1_graph.html#a6b219e526084e422f19a563b15352bb5">cerata::Graph::Add</a></div><div class="ttdeci">virtual Graph &amp; Add(const std::shared_ptr&lt; Object &gt; &amp;obj)</div><div class="ttdoc">Add an object to the component.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00061">graph.cc:61</a></div></div>
<div class="ttc" id="classcerata_1_1_component_pool_html"><div class="ttname"><a href="classcerata_1_1_component_pool.html">cerata::ComponentPool</a></div><div class="ttdoc">A pool of Components.</div><div class="ttdef"><b>Definition:</b> <a href="pool_8h_source.html#l00086">pool.h:86</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_a72fff25081e9586b759ad464d96ba204"><div class="ttname"><a href="classcerata_1_1_component.html#a72fff25081e9586b759ad464d96ba204">cerata::Component::AddInstanceOf</a></div><div class="ttdeci">Instance * AddInstanceOf(Component *comp, const std::string &amp;name=&quot;&quot;)</div><div class="ttdoc">Add a child Instance from a component.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00121">graph.cc:121</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a890868349dd18e54131e379a10f995c2"><div class="ttname"><a href="classcerata_1_1_graph.html#a890868349dd18e54131e379a10f995c2">cerata::Graph::GetNode</a></div><div class="ttdeci">std::optional&lt; Node * &gt; GetNode(const std::string &amp;node_name) const</div><div class="ttdoc">Get a Node of a specific type with a specific name.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00159">graph.cc:159</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a5da075f242493a3d9c9d23fcb67326d5"><div class="ttname"><a href="classcerata_1_1_graph.html#a5da075f242493a3d9c9d23fcb67326d5">cerata::Graph::objects</a></div><div class="ttdeci">std::deque&lt; Object * &gt; objects() const</div><div class="ttdoc">Get all objects.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00106">graph.h:106</a></div></div>
<div class="ttc" id="namespacecerata_html"><div class="ttname"><a href="namespacecerata.html">cerata</a></div><div class="ttdoc">Contains every Cerata class, function, etc...</div><div class="ttdef"><b>Definition:</b> <a href="api_8h_source.html#l00042">api.h:42</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html"><div class="ttname"><a href="classcerata_1_1_instance.html">cerata::Instance</a></div><div class="ttdoc">An instance.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00175">graph.h:175</a></div></div>
<div class="ttc" id="structcerata_1_1_port_html_a23d3db8dfd20f6cdae00c1fde0dcddf3"><div class="ttname"><a href="structcerata_1_1_port.html#a23d3db8dfd20f6cdae00c1fde0dcddf3">cerata::Port::Copy</a></div><div class="ttdeci">std::shared_ptr&lt; Object &gt; Copy() const override</div><div class="ttdoc">Deep-copy the port.</div><div class="ttdef"><b>Definition:</b> <a href="port_8cc_source.html#l00035">port.cc:35</a></div></div>
<div class="ttc" id="classcerata_1_1_node_html_a648f249ae6714826366a329ac33730c0"><div class="ttname"><a href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0">cerata::Node::NodeID</a></div><div class="ttdeci">NodeID</div><div class="ttdoc">Node type IDs with different properties.</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00044">node.h:44</a></div></div>
<div class="ttc" id="classcerata_1_1_node_html_a648f249ae6714826366a329ac33730c0aa0000d7769148184776f1d17656921b0"><div class="ttname"><a href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0aa0000d7769148184776f1d17656921b0">cerata::Node::NodeID::LITERAL</a></div><div class="ttdoc">No-input AND multi-output node with storage type and storage value.</div></div>
<div class="ttc" id="classcerata_1_1_graph_html"><div class="ttname"><a href="classcerata_1_1_graph.html">cerata::Graph</a></div><div class="ttdoc">A graph representing a hardware structure.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00037">graph.h:37</a></div></div>
<div class="ttc" id="classcerata_1_1_pool_html_a9e035943aaaaa8ba2ffd9d733d7187f7"><div class="ttname"><a href="classcerata_1_1_pool.html#a9e035943aaaaa8ba2ffd9d733d7187f7">cerata::Pool::Add</a></div><div class="ttdeci">void Add(const std::shared_ptr&lt; T &gt; &amp;object)</div><div class="ttdoc">Add an object to the pool, taking shared ownership. Object may not already exist in the pool.</div><div class="ttdef"><b>Definition:</b> <a href="pool_8h_source.html#l00042">pool.h:42</a></div></div>
<div class="ttc" id="classcerata_1_1_node_html_a648f249ae6714826366a329ac33730c0abf1d4bbf6ed8626603df4a7cac94ee8c"><div class="ttname"><a href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0abf1d4bbf6ed8626603df4a7cac94ee8c">cerata::Node::NodeID::PARAMETER</a></div><div class="ttdoc">Single-input AND multi-output node with default value.</div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ad7ed55b8478d2bb7b902015fe578f88e"><div class="ttname"><a href="classcerata_1_1_graph.html#ad7ed55b8478d2bb7b902015fe578f88e">cerata::Graph::par</a></div><div class="ttdeci">Parameter * par(const std::string &amp;signal_name) const</div><div class="ttdoc">Shorthand to Get(Node::PARAMETER, ..)</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00228">graph.cc:228</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_a1ca47db3cb53770e29b669b591ef2ee5"><div class="ttname"><a href="classcerata_1_1_instance.html#a1ca47db3cb53770e29b669b591ef2ee5">cerata::Instance::parent_</a></div><div class="ttdeci">Graph * parent_</div><div class="ttdoc">The parent of this instance.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00201">graph.h:201</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_a4915e1f293397a4142f65ab48f61dfe3"><div class="ttname"><a href="classcerata_1_1_component.html#a4915e1f293397a4142f65ab48f61dfe3">cerata::Component::GetAllUniqueComponents</a></div><div class="ttdeci">virtual std::deque&lt; const Component * &gt; GetAllUniqueComponents() const</div><div class="ttdoc">Returns all unique Components that are referred to by child Instances of this graph.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00128">graph.cc:128</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a66839413fa4730d2104bdfaaaaa0f90a"><div class="ttname"><a href="classcerata_1_1_graph.html#a66839413fa4730d2104bdfaaaaa0f90a">cerata::Graph::GetAll</a></div><div class="ttdeci">std::deque&lt; T * &gt; GetAll() const</div><div class="ttdoc">Get all objects of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00063">graph.h:63</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_a217e920c7666f729ffade7f7d3ed97eb"><div class="ttname"><a href="classcerata_1_1_component.html#a217e920c7666f729ffade7f7d3ed97eb">cerata::Component::children_</a></div><div class="ttdeci">std::deque&lt; std::unique_ptr&lt; Instance &gt; &gt; children_</div><div class="ttdoc">Graph children / subgraphs.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00167">graph.h:167</a></div></div>
<div class="ttc" id="classcerata_1_1_node_html_a648f249ae6714826366a329ac33730c0a463c00141b4c3a7f76acd3540052f8f5"><div class="ttname"><a href="classcerata_1_1_node.html#a648f249ae6714826366a329ac33730c0a463c00141b4c3a7f76acd3540052f8f5">cerata::Node::NodeID::PORT</a></div><div class="ttdoc">Single-input AND multi-output node with direction.</div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a703fd94a40053737d4a07e11b3676059"><div class="ttname"><a href="classcerata_1_1_graph.html#a703fd94a40053737d4a07e11b3676059">cerata::Graph::GetNodesOfType</a></div><div class="ttdeci">std::deque&lt; Node * &gt; GetNodesOfType(Node::NodeID id) const</div><div class="ttdoc">Get all nodes of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00199">graph.cc:199</a></div></div>
<div class="ttc" id="namespacecerata_html_a1460864427a8c61e7780b31edb5229c8"><div class="ttname"><a href="namespacecerata.html#a1460864427a8c61e7780b31edb5229c8">cerata::Contains</a></div><div class="ttdeci">bool Contains(const std::deque&lt; std::shared_ptr&lt; T &gt;&gt; &amp;list, const std::shared_ptr&lt; T &gt; &amp;item)</div><div class="ttdoc">Return true if list contains item, false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00050">utils.h:50</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a7314ea5856a2faec989994d53a7e08cf"><div class="ttname"><a href="classcerata_1_1_graph.html#a7314ea5856a2faec989994d53a7e08cf">cerata::Graph::CountNodes</a></div><div class="ttdeci">size_t CountNodes(Node::NodeID id) const</div><div class="ttdoc">Count nodes of a specific node type.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00179">graph.cc:179</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ac5c1bb8a02ddaee26f3880d9e3d5df90"><div class="ttname"><a href="classcerata_1_1_graph.html#ac5c1bb8a02ddaee26f3880d9e3d5df90">cerata::Graph::objects_</a></div><div class="ttdeci">std::deque&lt; std::shared_ptr&lt; Object &gt; &gt; objects_</div><div class="ttdoc">Graph objects.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00118">graph.h:118</a></div></div>
<div class="ttc" id="classcerata_1_1_instance_html_ab02babf1fa7c135622efbf1a8b8398cd"><div class="ttname"><a href="classcerata_1_1_instance.html#ab02babf1fa7c135622efbf1a8b8398cd">cerata::Instance::component</a></div><div class="ttdeci">Component * component() const</div><div class="ttdoc">Return the component this is an instance of.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00187">graph.h:187</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a4232ce93fcff7304919f50dc123f5d06"><div class="ttname"><a href="classcerata_1_1_graph.html#a4232ce93fcff7304919f50dc123f5d06">cerata::Graph::GetArraysOfType</a></div><div class="ttdeci">std::deque&lt; NodeArray * &gt; GetArraysOfType(Node::NodeID id) const</div><div class="ttdoc">Get all arrays of a specific type.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00209">graph.cc:209</a></div></div>
<div class="ttc" id="classcerata_1_1_component_html_afce635b911d12f6368724c5b649ffcbe"><div class="ttname"><a href="classcerata_1_1_component.html#afce635b911d12f6368724c5b649ffcbe">cerata::Component::Component</a></div><div class="ttdeci">Component(std::string name)</div><div class="ttdoc">Construct an empty Component.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00164">graph.h:164</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_ae9b4d0716bce30bd5d6f3c30aa85a9cb"><div class="ttname"><a href="classcerata_1_1_graph.html#ae9b4d0716bce30bd5d6f3c30aa85a9cb">cerata::Graph::porta</a></div><div class="ttdeci">PortArray * porta(const std::string &amp;port_name) const</div><div class="ttdoc">Shorthand to Get(, ..)</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00232">graph.cc:232</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a815d4043ef9878fa6b7f8b52638ac3ab"><div class="ttname"><a href="classcerata_1_1_graph.html#a815d4043ef9878fa6b7f8b52638ac3ab">cerata::Graph::sig</a></div><div class="ttdeci">Signal * sig(const std::string &amp;signal_name) const</div><div class="ttdoc">Shorthand to Get(Node::SIGNAL, ..)</div><div class="ttdef"><b>Definition:</b> <a href="graph_8cc_source.html#l00224">graph.cc:224</a></div></div>
<div class="ttc" id="classcerata_1_1_graph_html_a7b1467cb47abeb9ab239326a1f879f09"><div class="ttname"><a href="classcerata_1_1_graph.html#a7b1467cb47abeb9ab239326a1f879f09">cerata::Graph::meta_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::string &gt; meta_</div><div class="ttdoc">KV storage for metadata of tools or specific backend implementations.</div><div class="ttdef"><b>Definition:</b> <a href="graph_8h_source.html#l00120">graph.h:120</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d693b6a5dfcef49756eb42a0c06c09ce.html">cerata</a></li><li class="navelem"><b>graph.cc</b></li>
    <li class="footer">Generated on Tue Oct 8 2019 10:57:39 for Cerata by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
